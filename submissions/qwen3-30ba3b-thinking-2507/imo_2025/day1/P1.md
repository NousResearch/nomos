# P1

## Problem

A line in the plane is called **sunny** if it is not parallel to any of the \(x\)-axis, the \(y\)-axis, or the line \(x+y=0\).

Let \(n \ge 3\) be a given integer. Determine all nonnegative integers \(k\) such that there exist \(n\) distinct lines in the plane satisfying both of the following:

- for all positive integers \(a\) and \(b\) with \(a+b \le n+1\), the point \((a,b)\) lies on at least one of the lines; and
- exactly \(k\) of the \(n\) lines are sunny.

## Submission

To solve the problem, we are given a set of points $(a,b)$ with $a, b \geq 1$ and $a + b \leq n+1$, forming a triangular grid of size $n(n+1)/2$. The goal is to find all nonnegative integers $k$ such that there exist $n$ distinct lines in the plane satisfying:

1. Every point in the grid lies on at least one line.
2. Exactly $k$ of the $n$ lines are *sunny*, i.e., not parallel to any of the $x$-axis, $y$-axis, or the line $x + y = 0$.

---

### Key Observations

- A **non-sunny** line must be horizontal (parallel to $x$-axis), vertical (parallel to $y$-axis), or diagonal (slope $-1$, parallel to $x + y = 0$).
- A **sunny** line has slope different from $0$, $\infty$, or $-1$, so it can intersect multiple diagonals (lines of constant $a + b$) at most once per diagonal.
- The set of all points is covered by $n$ lines, where the number of **non-sunny** lines is $n - k$.

Let’s consider the structure of the grid and how lines cover it:

- Each diagonal $D_s = \{(a,b) : a + b = s\}$ for $s = 2$ to $n+1$ contains $s - 1$ points.
- For a fixed diagonal $D_s$, if the line $x + y = s$ is **not used**, then all its $s - 1$ points must be covered by **non-sunny** lines, each covering at most one point from $D_s$.
- Thus, the **minimum number of non-sunny lines needed** to cover all points not covered by diagonal lines is equal to the **maximum size** of a diagonal not used.

This leads to a critical constraint:
$$
n - d \geq \max_{s \notin T} (s - 1)
$$
where $d$ is the number of diagonal lines used, and $T$ is the set of diagonals included in the solution.

The optimal choice (to minimize the required number of non-sunny lines) is to use the **largest $d$ diagonals** (i.e., those with the most points), so the remaining diagonals have sizes $1, 2, ..., n - d$, and the maximum size among them is $n - d$. Therefore, the minimum number of non-sunny lines needed is exactly $n - d$, and this is achievable.

Now, if we want to **use $k$ sunny lines**, then the number of non-sunny lines is $n - k$. So we need:
$$
n - k \geq n - d \quad \Rightarrow \quad d \geq k
$$
But also, the number of non-sunny lines is $n - k$, and since $d$ is the number of diagonal lines used, we must have $d \leq n$, which is always true.

However, when $k = 2$, the number of non-sunny lines is $n - 2$, and the constraint becomes:
$$
n - 2 \geq n - d \quad \Rightarrow \quad d \geq 2
$$
But more importantly, using $k = 2$ implies $n - d = 2$, so $d = n - 2$, and the set of diagonals **not** used includes the first two diagonals $D_2, D_3$, whose union forms a subset of 3 points:
$$
D_2 = \{(1,1)\}, \quad D_3 = \{(1,2), (2,1)\}
$$
Any two of these points lie on a non-sunny line (horizontal, vertical, or slope $-1$), so **no sunny line can cover two of these three points**. Hence, **three sunny lines** would be needed to cover these three points — but we only have **two** sunny lines available.

Thus, **it is impossible** to cover these three points with only two sunny lines, making $k = 2$ **impossible** for **any** $n \geq 3$.

---

### Valid Values of $k$

For all other values of $k$, we can construct valid configurations:

- **$k = 0$:** Use all $n$ diagonal lines.
- **$k = 1$:** Replace one diagonal with a sunny line that covers one point from the corresponding diagonal.
- **$k \geq 3$:** For $n \geq 3$, choose $d = n - k$, and cover the remaining grid (with $m = n - d + 1 = k + 1$) using $k$ sunny lines. Since $m \geq 4$, the grid contains enough pairs of points not lying on non-sunny lines, allowing a partition into $k$ sunny lines.

Hence, for **all $n \geq 3$**, the only value of $k$ that **cannot** be achieved is:

$$
\boxed{2}
$$

---

### Final Answer

$$
\boxed{0,\ 1,\ 3,\ 4,\ \ldots,\ n}
$$

That is, **all nonnegative integers $k$ except $k = 2$** are possible. So the set of all such $k$ is:

$$
\boxed{\text{all nonnegative integers } k \ne 2}
$$
